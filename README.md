# Crypto Bot

Telegram –±–æ—Ç –¥–ª—è –æ–±–º–µ–Ω–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Rapira API.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîÑ –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üí∞ –†–∞—Å—á–µ—Ç —Å—É–º–º—ã –æ–±–º–µ–Ω–∞ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π –Ω–∞—Ü–µ–Ω–∫–æ–π
- üìä –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 8 –≤–∞–ª—é—Ç–Ω—ã—Ö –ø–∞—Ä –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã (16 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)
- üöÄ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫–ª–∏–∫–∞
- üì± –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
- üë• –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö
- ‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∞–ª—é—Ç–Ω—ã–µ –ø–∞—Ä—ã

- USD/RUB ‚Üî RUB/USD
- EUR/RUB ‚Üî RUB/EUR
- USD/EUR ‚Üî EUR/USD
- BTC/USD ‚Üî USD/BTC
- ETH/USD ‚Üî USD/ETH
- USDT/RUB ‚Üî RUB/USDT
- BTC/RUB ‚Üî RUB/BTC
- ETH/RUB ‚Üî RUB/ETH

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- Redis
- Telegram Bot Token
- Rapira API Key

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
git clone <repository-url>
cd crypto_bot
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\\Scripts\\activate  # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -e .

# –ò–ª–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–≤–∫–ª—é—á–∞–µ—Ç dev –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
pip install -e ".[dev]"
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

3. **–ó–∞–ø—É—Å–∫ Redis:**
```bash
redis-server
```

4. **–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞:**
```bash
python main.py
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `.env`:

```env
# Telegram Bot
BOT_TOKEN=your_telegram_bot_token_here
ADMIN_USER_ID=your_admin_user_id_here

# Rapira API
RAPIRA_API_URL=https://api.rapira.exchange
RAPIRA_API_KEY=your_rapira_api_key_here

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
DEFAULT_MARKUP_RATE=2.5
RATE_CACHE_TTL=300
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `/rate` - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∫—É—Ä—Å –≤–∞–ª—é—Ç–Ω–æ–π –ø–∞—Ä—ã
- `/calc` - –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É –æ–±–º–µ–Ω–∞
- `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/set_markup <pair> <rate>` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Ü–µ–Ω–∫—É –¥–ª—è –≤–∞–ª—é—Ç–Ω–æ–π –ø–∞—Ä—ã
- `/set_manager <pair> <user_id>` - –ù–∞–∑–Ω–∞—á–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –¥–ª—è –≤–∞–ª—é—Ç–Ω–æ–π –ø–∞—Ä—ã
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ bot/                 # Telegram bot handlers
‚îú‚îÄ‚îÄ services/           # Business logic services
‚îÇ   ‚îú‚îÄ‚îÄ rate_service.py    # Rapira API integration
‚îÇ   ‚îú‚îÄ‚îÄ cache_service.py   # Redis caching
‚îÇ   ‚îú‚îÄ‚îÄ calculation_service.py  # Exchange calculations
‚îÇ   ‚îî‚îÄ‚îÄ notification_service.py # Manager notifications
‚îú‚îÄ‚îÄ models/             # Data models
‚îú‚îÄ‚îÄ config/             # Configuration management
‚îî‚îÄ‚îÄ main.py            # Application entry point
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pip install -e ".[dev]"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pre-commit hooks
pre-commit install

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Makefile –∫–æ–º–∞–Ω–¥—ã:
make dev-setup  # –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
make format     # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make lint       # –õ–∏–Ω—Ç–∏–Ω–≥
make type-check # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
make test       # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make dev-check  # –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=src

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
pytest -m unit

# –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
pytest -m integration
```

## Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t crypto-bot .

# –ó–∞–ø—É—Å–∫ —Å docker-compose
docker-compose up -d
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏:

- –õ–æ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –¥–ª—è production
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö API
- –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.# crypto_bot
